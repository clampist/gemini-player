# Gemini Homepage Playwright Tests

This project houses a Playwright automation suite that exercises key unauthenticated flows on gemini.google.com: the chat surface (English/Japanese prompts, redo, copy), script-like input handling and search empty states, plus settings for locale/theme toggling.

## Prerequisites

- Node.js 18 or newer
- npm 9 or newer

## Install

```bash
npm install
```

## Run Tests

```bash
npm test
```

### Useful Variants

- `npm run test:headed` &mdash; executes tests in a visible browser window.
- `npm run test:ui` &mdash; opens the Playwright test runner UI for debugging.
- `npm run test:report` &mdash; opens the latest HTML report generated by the last run.

## Project Layout

- `playwright.config.ts` &mdash; shared Playwright configuration with Gemini base URL.
- `tests/chat.spec.ts` &mdash; chat surface smoke test with prompt variations.
- `tests/search.spec.ts` &mdash; exercises script-style inputs and search empty states.
- `tests/settings.spec.ts` &mdash; verifies locale toggling and theme configuration.
- `tests/support/` &mdash; reusable helpers (chat interactions, artifact helpers).
- `tests/data/selectors.ts` &mdash; central place for selectors and data-test-ids.
- `env.example` &mdash; sample environment variables (copy to `.env` for overrides).

## Artifacts

- `artifacts/` &mdash; curated screenshots and text snippets grouped by suite (populated via helpers in `tests/support/artifacts.ts`).
- `test-results/` &mdash; raw Playwright output per run (auto-generated, safe to delete).
- `playwright-report/` &mdash; latest HTML report (`npm run test:report` opens it).
- `logs/` &mdash; aggregated Playwright logs generated via helpers in `tests/support/logger.ts`.

## Configuration

Copy `env.example` to `.env` and fill in environment-specific values:

- `ENV` &mdash; friendly label for the target environment (optional, available to tests via `process.env`).
- `BASE_URL` &mdash; front-end entry point under test.
- `HEADLESS` &mdash; toggle headless mode (`true`/`false`); defaults to `true` in CI.

`playwright.config.ts` focuses on framework behaviour (timeouts, reporters, browser settings) and only reads the environment variables above to decide **what** to test.

## Continuous Integration

A GitHub Actions workflow (`.github/workflows/playwright.yml`) runs on pushes and pull requests targeting `main`. It installs Playwright browsers, executes `npm test`, and uploads two artifacts:

- `playwright-report` &mdash; download and open `index.html` locally to inspect the run.
- `screenshots` &mdash; raw PNG files captured during the suite.

Artifacts are retained for seven days; adjust `retention-days` inside the workflow if you need a longer window.

## Notes

- The search flow relies on common Gemini selectors. If the public site changes, update the locators in `tests/chat.spec.ts`.
- Browser binaries are managed via `npx playwright install`. Re-run the command if you delete the Playwright cache.

